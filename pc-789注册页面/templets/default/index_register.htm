<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset={dede:global.cfg_soft_lang/}" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" >
<title>{dede:field.title/}_{dede:global.cfg_webname/}</title>
<meta name="keywords" content="{dede:field.keywords/}" />
<meta name="description" content="{dede:field.description function='html2text(@me)'/}" />
<link href="{dede:global.cfg_templets_skin/}/style/reset.css" rel="stylesheet" media="screen" type="text/css" />
<link href="{dede:global.cfg_templets_skin/}/style/base.css" rel="stylesheet" media="screen" type="text/css" />
<link rel="stylesheet" href="{dede:global.cfg_templets_skin/}/style/user.css" />
<script src="http://apps.bdimg.com/libs/jquery/1.7.1/jquery.js" type="text/javascript"></script>
<script src="{dede:global.cfg_templets_skin/}/js/jquery.js"></script>
<script src="{dede:global.cfg_templets_skin/}/js/jquery.validate.js"></script>
    <style>
	#signupForm label.error {
		margin-left: 10px;
		width: auto;
		font-size:12px;
		color:red;
		display: inline;
	}
	</style>
</head>
<body>
	<!-- header  begin-->
		{dede:include filename="head.htm"/}
	<!-- /header -->
        <!--导航栏  end-->
    <div id="content">
        <div class="sidebar_right" style="overflow: hidden; padding-left: 10px;">
            <div class="right_content_top">
                <p>&nbsp;&nbsp;当前位置：{dede:field name='position'/}</p>
                <div class="kf">
                    <img src="{dede:global.cfg_templets_skin/}/images/userinfo.jpg" alt="图片加载不出来" />
                </div>
            </div>
            <div class="clear"></div>
			 <form class="cmxform" id="signupForm" method="post" action="">
				<fieldset>
                <div class="formbox">
                    <h3>账号注册<span style="float:right;font-size:13px;font-weight:normal;color:#595959;">已有789账号？<a style="color:red;cursor:pointer;text-decoration:underline;">立即登录</a></span></h3>
                    <div class="item">
                        <span class="label" for="accounts">用户名：</span>
                        <div class="fl">
                            <input  type="text" id="accounts" name="accounts" tabindex="1" class="text"  />
                         

                        </div>
                    </div>
					 <div class="item">
                        <span class="label" for="nickname">用户昵称：</span>
                        <div class="fl">
                            <input  id="nickname" name="nickname" type="text"  tabindex="2" class="text" />
                            
                        </div>
                    </div>

                    <!--item end-->
                    <div id="o-password">
                        <div class="item">
                            <span class="label" for="logonpass">设置密码：</span>
                            <div class="fl">
                                <input id="logonpass" name="logonpass" type="password" tabindex="3" class="text" />
                                
                            </div>
                        </div>
                        <!--item end-->

                        <div class="item">
                            <span class="label" for="insurepass">确认密码：</span>
                            <div class="fl">
                                <input id="insurepass" name="insurepass"  type="password" tabindex="4" class="text" />
                                
                            </div>
                        </div>
                        <!--item end-->
                    </div>
					<!--
                    <div class="item">
                        <span class="label">验证码：</span>
                        <div class="fl">
                            <input name="txtVerifyCode" type="text" maxlength="6" id="txtVerifyCode" tabindex="7" class="text text-1" autocomplete="off" />
                            <label class="img">
                                <img id="JD_Verification1" ver_colorofnoisepoint="#888888" src="/ValidateImage.aspx" onclick="this.src='/ValidateImage.aspx?r='+Math.random();" alt="" style="cursor: pointer; width: 100px; height: 26px;" />
                            </label>
                            <label>&nbsp;<label style="color:red;">*</label>看不清?点击图片更换</label>
                          
                        </div>
                    </div>-->
                    <div class="item">
                        <span class="label">&nbsp;</span>
                        <div class="fl">
						<input type="checkbox" class="checkbox" id="agree" name="agree" />
						  <label for="agree"><a href="/registrationAgreement" target="_blank">同意网站用户注册协议</a></label> 
						  
                        </div>
                    </div>
                    <!--item end-->

                    <div class="item">
                        <span class="label">&nbsp;</span>
                        <input type="submit" name="btnRegister" value="" id="btnRegister" tabindex="13" class="yellow_button disabled" />
                    </div>
                    <!--item end-->
                    <input type="hidden" name="host" value="" id="host"/>
					
                </div>
				</fieldset>
			</form>
        </div>
            
		{dede:include filename="left.htm"/}
            
        </div>
       <!-- footer  begin-->
		{dede:include filename="footer.htm"/}
        <!--footer  end-->
		<script type="text/javascript">
	$.validator.addMethod("af",function(value,element,params){  
	  params=/^[A-Za-z0-9]+$/;
		if(params.test(value)){
			return true;
		}else{
			return false;
		}
	},"用户名只能是英文和或数字的组合！");
	
	
	$.validator.addMethod("nickNames",function(value,element,params){  
	 params=/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/;
		if(params.test(value)){
			return true;
		}else{
			return false;
		}
	},"由字母、数字、下划线和汉字的组合！");	
	
	$.validator.addMethod("userPwd",function(value,element,params){  
	 params=/^[A-Za-z0-9]+$/;
		if(params.test(value)){
			return true;
		}else{
			return false;
		}
	},"密码只能是英文和或数字的组合!");	
	
	var Login =function(){
	    return{
	        init:function(){
				$("#signupForm").validate({
					success: function(label) {
							  label.html("<img src=\'/templets/default/images/right.png\' />");
							},
					errorPlacement: function(error, element) {
							if ( element.is(":checkbox") )
								error.appendTo ( element.next() );
							else
								error.appendTo(element.parent()); 
						},
					rules: {
						accounts: {
							required: true,
							rangelength:[6 ,16],
							af:["params"],
							remote : {
								url : "",
								type : "post",
							    cache:false,
								dataType : "json",
								data : {
									name: function() {
								       return $("#accounts").val();
							        }
								}
							}
						},
						nickname:{
							required: true,
							rangelength:[6 ,16],
							nickNames:["params"],
							remote : {
								url : "",
								type : "post",
							    cache:false,
								dataType : "json",
								data : {
									nickname: function() {
								       return $("#nickname").val();
							        }
								}
							}
						},
						logonpass: {
							required: true,
							rangelength:[6 ,32],
							userPwd:["params"]
						},
						insurepass: {
							required: true,
							rangelength:[6 ,32],
							equalTo: "#logonpass"
						},
						agree: "required"
					},
					messages: {
						accounts: {
							required: "请输入用户名",
							rangelength:jQuery.validator.format("用户名的长度{0}到{1}字符！"),
							remote: "很遗憾，该用户名已经被注册，请您另选一个"
						},
						nickname:{
							required: "请输入昵称",
							rangelength:jQuery.validator.format("昵称的长度{0}到{1}字符！"),
							remote: "很遗憾，该昵称已经被注册，请您另选一个"
						},
						logonpass: {
							required: "请输入您的登录密码",
							rangelength:jQuery.validator.format("登录密码的长度{0}到{1}字符！")
						},
						insurepass: {
							required: "请输入登录确认密码",
							rangelength:jQuery.validator.format("登录确认密码的长度{0}到{1}字符！"),
							equalTo: "两次输入的密码不一样，请重新输入！"
						},
						agree: "请选中已阅读并同意服务条款"
					},
					submitHandler: function (form) {
						doLogin();
					}	
				});
				
				$("#btnRegister").click(function(){
			         if ($('#signupForm').valid()) {
							doLogin();
		                }
		                return false;
		        });
		    }
	   };
	}();
   function doLogin(){
	  if($("#signupForm").valid()){
		$.post(
			"http://172.16.10.111:8090/register.php",
			 {accounts:$.trim($("#accounts").val()),nickname:$.trim($("#nickname").val()),logonpass:$.trim($("#logonpass").val()),insurepass:$.trim($("#insurepass").val())},
			 function(data){
					if(data==0){
					 alert("注册成功！");
					 window.location.href=""; 
					}else{
					alert(data);
					}
			 },'json');
	     }
	}
	</script>
	
	<script type="text/javascript">		
		$(function(){
			Login.init();
		});
	</script>
</body>
</html>

